!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e){var t,r,n,i,a,c,o=!1;if(q.querySelector(".active")){var s;r=q.querySelector(".active");var u,l=q.getBoundingClientRect();(t=r.getContext("2d")).lineWidth=1,t.strokeStyle=e,n=[],i=t.getImageData(0,0,l.width,l.height),r.addEventListener("mousedown",function(e){o=!0,a=e.pageX-l.x,c=e.pageY-l.y,n.push([a,c])}),r.addEventListener("mousemove",function(a){if(o){t.putImageData(i,0,0),n.push([a.pageX-l.x,a.pageY-l.y]),t.beginPath(),t.strokeStyle=e,t.moveTo(n[0][0],n[0][1]);for(var c=1;c<n.length;c+=1)t.lineTo(n[c][0],n[c][1]);t.stroke(),function(){var e=(u=A.querySelector(".active")).querySelector("img"),n=r.toDataURL();e.src=n,s=parseInt(u.getAttribute("id"),10);var i=S.findIndex(function(e){return e.id===s});S[i].src=n,E.querySelector("img").src=n,b[i].bufer=t.getImageData(0,0,l.width,l.height),w[i].src=n}()}}),r.addEventListener("mouseup",function(){o=!1,n=[],i=t.getImageData(0,0,l.width,l.height)})}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);var a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gray",n=arguments.length>2?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.color=r,this.bufer=n}var t,r,n;return t=e,(r=[{key:"addCanvas",value:function(){var e=document.createElement("canvas");e.setAttribute("id","".concat(this.id,"canvas")),e.setAttribute("class","canvas active"),e.setAttribute("width",q.clientWidth),e.setAttribute("height",q.clientWidth),q.appendChild(e),void 0!==this.bufer&&e.getContext("2d").putImageData(this.bufer,0,0)}},{key:"copyCanvas",value:function(e){var t=document.createElement("canvas");t.setAttribute("id","".concat(this.id,"canvas")),q.querySelector(".active")&&q.querySelector(".active").classList.remove("active"),t.setAttribute("class","canvas active"),t.setAttribute("width",q.clientWidth),t.setAttribute("height",q.clientWidth);var r=Array.from(q.children);q.insertBefore(t,r[e]),void 0!==this.bufer&&t.getContext("2d").putImageData(this.bufer,0,0)}},{key:"delete",value:function(e){b.splice(e,1),document.getElementById("".concat(this.id,"canvas")).remove()}}])&&i(t.prototype,r),n&&i(t,n),e}();function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"img/canvas.png";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.src=r}var t,r,n;return t=e,(r=[{key:"addPreview",value:function(e){var t=document.createElement("div");t.setAttribute("id","".concat(this.id,"preview")),t.innerHTML='<div class="number">'.concat(e,'</div><button type="button" class="delete" title="delete"></button><button type="button" class="copy" title="copy canvas"></button>'),A.querySelector(".active")&&A.querySelector(".active").classList.remove("active"),t.classList.add("preview","active");var r=document.createElement("img");r.classList.add("preview-img"),r.setAttribute("src",this.src),r.setAttribute("alt",""),t.appendChild(r),A.appendChild(t)}},{key:"delete",value:function(e){S.splice(e,1),document.getElementById("".concat(this.id,"preview")).remove()}}])&&c(t.prototype,r),n&&c(t,n),e}();function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"img/canvas.png";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.src=r,this.interval=null}var t,r,n;return t=e,(r=[{key:"addPreviewFrames",value:function(){var e=E.querySelector("img");e.setAttribute("src",this.src),E.appendChild(e)}},{key:"copyPreviewFrames",value:function(e){var t=E.querySelector("img");t.setAttribute("src",this.src);var r=Array.from(E.children);E.insertBefore(t,r[e])}}])&&s(t.prototype,r),n&&s(t,n),e}(),l=function(e){q.querySelector(".active")&&q.querySelector(".active").classList.remove("active");var t=new a(e);t.addCanvas();var r=new o(e),i=S.length+1;r.addPreview(i);var c=new u(e);c.addPreviewFrames(),b.push(t),S.push(r),w.push(c),k.removeAttribute("disabled"),n(h)},d=function(){A.innerHTML="";for(var e=1;e<=S.length;e+=1){new o(S[e-1].id,S[e-1].src).addPreview(e)}},v=null,f=function(e){var t=E.querySelector("img");v&&clearInterval(v);var r=0;v=setInterval(function(){w[r]&&(t.src=w[r].src),r!==w.length-1?r+=1:r=0},e)},m=document.querySelector(".main-pallete"),y=document.getElementById("toolPencil"),p=document.querySelector("#toolChooseColor input"),g=function(){m.querySelector(".active")&&m.querySelector(".active").classList.remove("active"),p.parentElement.classList.remove("active")};r.d(t,"canvasBox",function(){return q}),r.d(t,"previewBox",function(){return A}),r.d(t,"previewFramesBox",function(){return E}),r.d(t,"chooseFPSBox",function(){return I}),r.d(t,"arrCanvasList",function(){return b}),r.d(t,"arrPreviewList",function(){return S}),r.d(t,"arrPreviewFramesList",function(){return w}),r.d(t,"nextId",function(){return L}),r.d(t,"addNewCanvasBtn",function(){return P}),r.d(t,"toolPencil",function(){return C}),r.d(t,"color",function(){return h}),r.d(t,"fullScreenBtn",function(){return k});var h,b=[],S=[],w=[],L=1,q=document.querySelector(".canvas-box"),A=document.querySelector(".preview-box"),E=document.querySelector(".previes-frames"),I=document.querySelector(".speed-btn-box"),k=document.getElementById("FullScreenBtn"),C=document.getElementById("toolPencil"),x=document.querySelector("#toolChooseColor input");k.addEventListener("click",function(){var e=q.querySelector(".active");e.requestFullscreen?e.requestFullscreen():e.webkitrequestFullscreen&&e.webkitRequestFullscreen()}),m.addEventListener("click",function(e){var t=e.target.getAttribute("data-cursor");q.setAttribute("data-cursor",t),e.target.classList.add("active"),e.target}),document.body.addEventListener("keydown",function(e){80===e.which&&(g(),y.classList.contains("active")||y.classList.add("active"),q.setAttribute("data-cursor","cursor-pencil")),67===e.which&&(g(),q.setAttribute("data-cursor","cursor-choose-color"),p.click())}),document.addEventListener("DOMContentLoaded",function(){l(L)});var P=document.getElementById("addNewCanvas");P.addEventListener("click",function(){l(L+=1)}),I.addEventListener("click",function(e){if("button"===e.target.getAttribute("type")){I.querySelector(".active").classList.remove("active");var t=1e3/e.target.getAttribute("data-fps");e.target.classList.add("active"),f(t)}}),A.addEventListener("click",function(e){var t,r;((e.target.classList.contains("preview-img")||e.target.classList.contains("number"))&&function(e){var t=e.target,r=parseInt(t.parentElement.getAttribute("id"),10);A.querySelector(".active")&&A.querySelector(".active").classList.remove("active"),q.querySelector(".active")&&q.querySelector(".active").classList.remove("active"),t.parentElement.classList.add("active"),document.getElementById("".concat(r,"canvas")).classList.add("active"),n(h)}(e),e.target.classList.contains("delete"))&&(A.querySelector(".active")&&(t=parseInt(A.querySelector(".active").getAttribute("id"),10),r=S.findIndex(function(e){return e.id===t})),function(e){var t=parseInt(e.target.parentElement.getAttribute("id"),10),r=S.findIndex(function(e){return e.id===t});S[r].delete(r),b[r].delete(r),1===w.length&&(E.querySelector("img").src="img/canvas.png",k.setAttribute("disabled","disabled")),w.splice(r,1)}(e),d(),function(e){if(A.querySelector(".active")){var t=Array.from(A.children),r=Array.from(q.children);A.querySelector(".active").classList.remove("active"),q.querySelector(".active")&&q.querySelector(".active").classList.remove("active"),S.length>e?(t[e].classList.add("active"),r[e].classList.add("active")):(t[t.length-1].classList.add("active"),r[r.length-1].classList.add("active"))}}(r));e.target.classList.contains("copy")&&function(e,t){var r=parseInt(e.target.parentElement.getAttribute("id"),10),i=S.findIndex(function(e){return e.id===r}),c=new o(t,S[i].src);S.splice(i+1,0,c);var s=new u(t,S[i].src);s.copyPreviewFrames(i+1,i),d(),A.querySelector(".active")&&A.querySelector(".active").classList.remove("active"),Array.from(A.children)[i+1].classList.add("active");var l=new a(t,b[i].color,b[i].bufer);l.copyCanvas(i+1,i),b.splice(i+1,0,l),w.splice(i+1,0,s),n(h)}(e,L+=1)}),q.addEventListener("click",function(){if(q.querySelector(".active")){n(h);var e=1e3/I.querySelector(".active").getAttribute("data-fps");f(e)}}),x.addEventListener("input",function(e){n(h=e.target.value)})}]);
//# sourceMappingURL=bundle.js.map